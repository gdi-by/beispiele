<!DOCTYPE html>
<html>
    <head>
        <title>BVV WMTS - Beispiel: OL3 EPSG:3857</title>
        <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="http://openlayers.org/en/v3.8.1/css/ol.css" type="text/css">
        <script src="http://openlayers.org/en/v3.8.1/build/ol.js"></script>

    </head>
    <body>
        <div class="container-fluid">

            <div class="row-fluid">
                <div class="span12">
                    <div id="map" class="map"></div>
                </div>
            </div>

        </div>
        <script>
            
            var serviceKey = '{SERVICEKEY}';
            var url = [];
            url.push(
                    'http://www.geodaten.bayern.de/wmts-test/',
                    serviceKey,
                    '/1.0.0/WMTSCapabilities.xml'
                    );

            var parser = new ol.format.WMTSCapabilities();
            var map;
            $.get(url.join('')).then(function (response) {
                var result = parser.read(response);
                
                // Layer-Identifier: z. B. 'by_webatlas'
                var options = ol.source.WMTS.optionsFromCapabilities(result,
                        {layer: 'by_webatlas', matrixSet: 'smerc'});

                map = new ol.Map({
                    layers: [
                        new ol.layer.Tile({
                            opacity: 1,
                            source: new ol.source.WMTS(options)
                        })
                    ],
                    target: 'map',
                    view: new ol.View({
                        center: [1288556, 6130050],
                        zoom: 14
                    })
                });
            });

        </script>
    </body>
</html>